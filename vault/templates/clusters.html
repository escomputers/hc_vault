{% extends "index.html" %}

{% block content %}
<div class="content-wrapper">
<!-- Content Header (Page header) -->
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
  		  <h3 class="text-bold text-dark">Settings</h3>
		</div>
      </div>
    </div>
  </section>

	<!-- Main content -->
	<section class="content">
		<div class="container-fluid">

			<div class="card"><!-- List Clusters -->
				<div class="card-header">
					<h5>
						<i class="fas fa-circle-nodes"></i>
						&nbsp;Clusters
					</h5>
				</div>

				<div class="card-body">
					<table id="clusters" class="table table-bordered table-hover">
						<thead>
							<tr>
							<th>Nome</th>
							<th>Nodi</th>
							<th></th>
							</tr>
						</thead>

						<tbody>
							<tr>
								<td>MoncalieriTest</td>
								<td>https://vault01.company.com, https://vault02.company.com</td>
								<td><span class="badge bg-danger"><font size="3.1em">Remove</font></span>
								</td>
							</tr>
							<tr>
								<td>ParmaProd</td>
								<td>https://vault04.company.com, https://vault05.company.com</td>
								<td><span class="badge bg-danger"><font size="3.1em">Remove</font></span>
								</td>
							</tr>
							<tr>
								<td>TorinoTest</td>
								<td>https://vault06.company.com, https://vault07.company.com</td>
								<td><span class="badge bg-danger"><font size="3.1em">Remove</font></span>
								</td>
							</tr>
						</tbody>
					</table>
				</div><!-- card body -->
		</div><!-- card -->

			<form id="Form" action="" method="post">
			{% csrf_token %}

				<div class="card"><!-- second card -->
					<div class="card-header">
						<h5>
							<i class="fas fa-server"></i>
							&nbsp;Add cluster
						</h5>
					</div>

					<div class="card-body">
						<div class="row">
							<div class="col-sm-5">
								<div class="input-group mb-3">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="fas fa-id-badge"></i></span>
									</div>
								<input type="text" name="cluster_name" class="form-control" placeholder="Cluster name">
								<!-- Add URLs button -->
								<div class="input-group-append">
									<button type="button" class="btn add btn-primary" id="addRow"><i class="fas fa-plus"></i>
										Add node
									</button>
								</div>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-sm-8">
								<div id="inputFormRow">
									<div class="input-group mb-3">
										<div class="input-group-prepend">
											<span class="input-group-text"><i class="fas fa-globe"></i></span>
										</div>
									  <input type="text" name="vault_node[]" class="form-control m-input" placeholder="Vault URL" autocomplete="off">
										<div class="input-group-append">
										  <button id="removeRow" type="button" class="btn btn-danger">Remove</button>
										</div>
									</div><!-- input-group mb-3 -->
							  </div><!-- inputFormRow -->
	
							  <div id="newRow"></div>

							</div><!-- col-sm-7 -->
						</div><!-- row -->

					</div><!-- card-body -->
				</div><!-- card -->

			<!-- Pulsante submit -->
			<button type="submit" class="submit btn btn-primary btn-block"  name="submit" value="Submit">Submit</button>

			</form>
		</div><!-- container-fluid -->

	</section>
</div><!-- content-wrapper -->

<!-- datatable -->
<script>
$(function () {
	$('#clusters').DataTable({
		"paging": true,
		"lengthChange": false,
		"searching": false,
		"order": [[ 2, "desc" ]],
		"info": true,
		"autoWidth": false,
		"responsive": true,
	});
});
</script>

<!-- aggiunta campi dinamici -->
<script>
	// add row
	$("#addRow").click(function () {
		let html = '';
		html += '<div id="inputFormRow">';
		html += '<div class="input-group mb-3">';
		html += '<div class="input-group-prepend"><span class="input-group-text"><i class="fas fa-globe"></i></span></div>';
		html += '<input type="text" name="vault_node[]" class="form-control m-input" placeholder="Vault URL" autocomplete="off">';
		html += '<div class="input-group-append">';
		html += '<button id="removeRow" type="button" class="btn btn-danger">Remove</button>';
		html += '</div>';
		html += '</div>';

		$('#newRow').append(html);
	});

	// remove row
	$(document).on('click', '#removeRow', function () {
		$(this).closest('#inputFormRow').remove();
	});
</script>
{% endblock %}
